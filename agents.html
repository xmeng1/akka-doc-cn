<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Agents &bull; Akka Documentation 中文</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="akka-docs-cn"/>
<link rel="canonical" href="http://doc.akka.io/docs/akka/current/agents.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<link rel="manifest" href="images/manifest.json">
<meta name="msapplication-TileImage" content="images/mstile-150x150.png">
<meta name="msapplication-TileColor" content="#15a9ce">
<meta name="theme-color" content="#15a9ce">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://optanon.blob.core.windows.net/consent/159bb13d-6748-4399-806e-ac28db879785.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<script type="text/plain" class="optanon-category-2">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
ga('tsTracker.require', 'linker');
ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org','scala-ide.org']);
ga('tsTracker.send', 'pageview');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="http://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Documentation 中文</a></h1>
</div>
<div class="nav-header-version">
Version 2.5-SNAPSHOT
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search"/>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="security/index.html" class="page">Security Announcements</a></li>
  <li><a href="guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="general/index.html" class="page">General Concepts</a></li>
  <li><a href="index-actors.html" class="page">Actors</a></li>
  <li><a href="typed/index.html" class="page">Akka Typed</a></li>
  <li><a href="index-cluster.html" class="page">Clustering</a></li>
  <li><a href="stream/index.html" class="page">Streams</a></li>
  <li><a href="index-network.html" class="page">Networking</a></li>
  <li><a href="discovery/index.html" class="page">Discovery</a></li>
  <li><a href="index-futures.html" class="page">Futures and Agents</a>
  <ul>
    <li><a href="futures.html" class="page">Futures</a></li>
    <li><a href="agents.html#agents" class="active page">Agents</a>
    <ul>
      <li><a href="agents.html#dependency" class="header">Dependency</a></li>
      <li><a href="agents.html#introduction" class="header">Introduction</a></li>
      <li><a href="agents.html#creating-agents" class="header">Creating Agents</a></li>
      <li><a href="agents.html#reading-an-agents-value" class="header">Reading an Agent&rsquo;s value</a></li>
      <li><a href="agents.html#updating-agents-send-alter-" class="header">Updating Agents (send &amp; alter)</a></li>
      <li><a href="agents.html#awaiting-an-agents-value" class="header group-scala">Awaiting an Agent&rsquo;s value</a></li>
      <li><a href="agents.html#monadic-usage" class="header group-scala">Monadic usage</a></li>
      <li><a href="agents.html#configuration" class="header">Configuration</a></li>
      <li><a href="agents.html#deprecated-transactional-agents" class="header">Deprecated Transactional Agents</a></li>
    </ul></li>
  </ul></li>
  <li><a href="index-utilities.html" class="page">Utilities</a></li>
  <li><a href="common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="howto.html" class="page">HowTo: Common Patterns</a></li>
  <li><a href="project/index.html" class="page">Project Information</a></li>
  <li><a href="additional/index.html" class="page">Additional Information</a></li>
  <li><a href="chinese/index.html" class="page">中文版文档说明</a></li>
</ul>
</nav>
</div>
</header>

<aside class="show-for-large">
<header class="nav-header fixed-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Documentation 中文</a></h1>
</div>
<div class="nav-header-version">
Version 2.5-SNAPSHOT
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search"/>
</div>
</header>
<nav class="site-nav fixed-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="security/index.html" class="page">Security Announcements</a></li>
  <li><a href="guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="general/index.html" class="page">General Concepts</a></li>
  <li><a href="index-actors.html" class="page">Actors</a></li>
  <li><a href="typed/index.html" class="page">Akka Typed</a></li>
  <li><a href="index-cluster.html" class="page">Clustering</a></li>
  <li><a href="stream/index.html" class="page">Streams</a></li>
  <li><a href="index-network.html" class="page">Networking</a></li>
  <li><a href="discovery/index.html" class="page">Discovery</a></li>
  <li><a href="index-futures.html" class="page">Futures and Agents</a>
  <ul>
    <li><a href="futures.html" class="page">Futures</a></li>
    <li><a href="agents.html#agents" class="active page">Agents</a>
    <ul>
      <li><a href="agents.html#dependency" class="header">Dependency</a></li>
      <li><a href="agents.html#introduction" class="header">Introduction</a></li>
      <li><a href="agents.html#creating-agents" class="header">Creating Agents</a></li>
      <li><a href="agents.html#reading-an-agents-value" class="header">Reading an Agent&rsquo;s value</a></li>
      <li><a href="agents.html#updating-agents-send-alter-" class="header">Updating Agents (send &amp; alter)</a></li>
      <li><a href="agents.html#awaiting-an-agents-value" class="header group-scala">Awaiting an Agent&rsquo;s value</a></li>
      <li><a href="agents.html#monadic-usage" class="header group-scala">Monadic usage</a></li>
      <li><a href="agents.html#configuration" class="header">Configuration</a></li>
      <li><a href="agents.html#deprecated-transactional-agents" class="header">Deprecated Transactional Agents</a></li>
    </ul></li>
  </ul></li>
  <li><a href="index-utilities.html" class="page">Utilities</a></li>
  <li><a href="common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="howto.html" class="page">HowTo: Common Patterns</a></li>
  <li><a href="project/index.html" class="page">Project Information</a></li>
  <li><a href="additional/index.html" class="page">Additional Information</a></li>
  <li><a href="chinese/index.html" class="page">中文版文档说明</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer fixed-sidebar-footer">
<a href="http://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"></a>

</footer>
</aside>

<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">

<article class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#agents" name="agents" class="anchor"><span class="anchor-link"></span></a>Agents</h1>
<h2><a href="#dependency" name="dependency" class="anchor"><span class="anchor-link"></span></a>Dependency</h2>
<p>To use Agents, you must add the following dependency in your project:</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.typesafe.akka" %% "akka-agent" % "2.5-SNAPSHOT"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-agent_2.12&lt;/artifactId&gt;
  &lt;version&gt;2.5-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.typesafe.akka', name: 'akka-agent_2.12', version: '2.5-SNAPSHOT'
}</code></pre></dd></dl>
<h2><a href="#introduction" name="introduction" class="anchor"><span class="anchor-link"></span></a>Introduction</h2>
<p>Agents in Akka are inspired by <a href="http://clojure.org/agents">agents in Clojure</a>.</p><div class="callout warning "><div class="callout-title">Deprecation warning</div>
<p>Agents have been deprecated and are scheduled for removal in the next major version. We have found that their leaky abstraction (they do not work over the network) make them inferior to pure Actors, and in face of the soon inclusion of Akka Typed we see little value in maintaining the current Agents.</p></div>
<p>Agents provide asynchronous change of individual locations. Agents are bound to a single storage location for their lifetime, and only allow mutation of that location (to a new state) to occur as a result of an action. Update actions are functions that are asynchronously applied to the Agent&rsquo;s state and whose return value becomes the Agent&rsquo;s new state. The state of an Agent should be immutable.</p>
<p>While updates to Agents are asynchronous, the state of an Agent is always immediately available for reading by any thread (using <code>get</code> <span class="group-scala">or <code>apply</code></span>) without any messages.</p>
<p>Agents are reactive. The update actions of all Agents get interleaved amongst threads in an <code>ExecutionContext</code>. At any point in time, at most one <code>send</code> action for each Agent is being executed. Actions dispatched to an agent from another thread will occur in the order they were sent, potentially interleaved with actions dispatched to the same agent from other threads.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Agents are local to the node on which they are created. This implies that you should generally not include them in messages that may be passed to remote Actors or as constructor parameters for remote Actors; those remote Actors will not be able to read or update the Agent.</p></div>
<h2><a href="#creating-agents" name="creating-agents" class="anchor"><span class="anchor-link"></span></a>Creating Agents</h2>
<p>Agents are created by invoking <span class="group-scala"><code>Agent(value)</code></span> <span class="group-java"><code>new Agent&lt;ValueType&gt;(value, executionContext)</code></span> passing in the Agent&rsquo;s initial value and providing an <span class="group-scala">implicit</span> <code>ExecutionContext</code> to be used for it, <span class="group-scala">for these examples we&rsquo;re going to use the default global one, but YMMV:</span></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L18-L20" target="_blank" title="Go to snippet source"></a><code class="language-scala">import scala.concurrent.ExecutionContext.Implicits.global
import akka.agent.Agent
val agent = Agent(5)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L15-L17" target="_blank" title="Go to snippet source"></a><code class="language-java">import scala.concurrent.ExecutionContext;
import akka.agent.Agent;
import akka.dispatch.ExecutionContexts;
ExecutionContext ec = ExecutionContexts.global();
Agent&lt;Integer&gt; agent = Agent.create(5, ec);</code></pre></dd>
</dl>
<h2><a href="#reading-an-agents-value" name="reading-an-agents-value" class="anchor"><span class="anchor-link"></span></a>Reading an Agent&rsquo;s value</h2>
<p>Agents can be dereferenced (you can get an Agent&rsquo;s value) by invoking the Agent with <span class="group-scala">parentheses</span> <span class="group-java"><code>get()</code></span> like this:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L30" target="_blank" title="Go to snippet source"></a><code class="language-scala">val result = agent()
// Or by using the get method:
val result = agent.get</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L40" target="_blank" title="Go to snippet source"></a><code class="language-java">Integer result = agent.get();</code></pre></dd>
</dl>
<p>Reading an Agent&rsquo;s current value does not involve any message passing and happens immediately. So while updates to an Agent are asynchronous, reading the state of an Agent is synchronous.</p><div class="group-java">
<p>You can also get a <code>Future</code> to the Agents value, that will be completed after the currently queued updates have completed:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L25" target="_blank" title="Go to snippet source"></a><code class="language-java">import scala.concurrent.Future;
Future&lt;Integer&gt; future = agent.future();</code></pre>
<p>See <a href="futures.html">Futures</a> for more information on <code>Futures</code>.</p></div>
<h2><a href="#updating-agents-send-alter-" name="updating-agents-send-alter-" class="anchor"><span class="anchor-link"></span></a>Updating Agents (send &amp; alter)</h2>
<p>You update an Agent by sending a function <span class="group-java">(<code>akka.dispatch.Mapper</code>)</span> that transforms the current value or by sending just a new value. The Agent will apply the new value or function atomically and asynchronously. The update is done in a fire-forget manner and you are only guaranteed that it will be applied. There is no guarantee of when the update will be applied but dispatches to an Agent from a single thread will occur in order. You apply a value or a function by invoking the <code>send</code> function.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L53-L60" target="_blank" title="Go to snippet source"></a><code class="language-scala">// send a value, enqueues this change
// of the value of the Agent
agent send 7

// send a function, enqueues this change
// to the value of the Agent
agent send (_ + 1)
agent send (_ * 2)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L21" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.dispatch.Mapper;
// send a value, enqueues this change
// of the value of the Agent
agent.send(7);

// send a Mapper, enqueues this change
// to the value of the Agent
agent.send(
    new Mapper&lt;Integer, Integer&gt;() {
      public Integer apply(Integer i) {
        return i * 2;
      }
    });</code></pre></dd>
</dl>
<p>You can also dispatch a function to update the internal state but on its own thread. This does not use the reactive thread pool and can be used for long-running or blocking operations. You do this with the <code>sendOff</code> method. Dispatches using either <code>sendOff</code> or <code>send</code> will still be executed in order.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L66-L69" target="_blank" title="Go to snippet source"></a><code class="language-scala">// the ExecutionContext you want to run the function on
implicit val ec = someExecutionContext()
// sendOff a function
agent sendOff longRunningOrBlockingFunction</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L21" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.dispatch.Mapper;
// sendOff a function
agent.sendOff(longRunningOrBlockingFunction, theExecutionContextToExecuteItIn);</code></pre></dd>
</dl>
<p>All <code>send</code> methods also have a corresponding <code>alter</code> method that returns a <code>Future</code>. See <a href="futures.html"><code>Future</code>s</a> for more information on <code>Future</code>s.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L78-L83" target="_blank" title="Go to snippet source"></a><code class="language-scala">// alter a value
val f1: Future[Int] = agent alter 7

// alter a function
val f2: Future[Int] = agent alter (_ + 1)
val f3: Future[Int] = agent alter (_ * 2)
// the ExecutionContext you want to run the function on
implicit val ec = someExecutionContext()
// alterOff a function
val f4: Future[Int] = agent alterOff longRunningOrBlockingFunction</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/java/jdocs/agent/AgentDocTest.java#L25" target="_blank" title="Go to snippet source"></a><code class="language-java">import scala.concurrent.Future;
import akka.dispatch.Mapper;
// alter a value
Future&lt;Integer&gt; f1 = agent.alter(7);

// alter a function (Mapper)
Future&lt;Integer&gt; f2 =
    agent.alter(
        new Mapper&lt;Integer, Integer&gt;() {
          public Integer apply(Integer i) {
            return i * 2;
          }
        });
// alterOff a function (Mapper)
Future&lt;Integer&gt; f3 =
    agent.alterOff(longRunningOrBlockingFunction, theExecutionContextToExecuteItIn);</code></pre></dd>
</dl><div class="group-scala">
<h2><a href="#awaiting-an-agents-value" name="awaiting-an-agents-value" class="anchor"><span class="anchor-link"></span></a>Awaiting an Agent&rsquo;s value</h2>
<p>You can also get a <code>Future</code> to the Agents value, that will be completed after the currently queued updates have completed:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L44" target="_blank" title="Go to snippet source"></a><code class="language-scala">val future = agent.future</code></pre>
<p>See <a href="futures.html"><code>Future</code>s</a> for more information on <code>Future</code>s.</p>
<h2><a href="#monadic-usage" name="monadic-usage" class="anchor"><span class="anchor-link"></span></a>Monadic usage</h2>
<p>Agents are also monadic, allowing you to compose operations using for-comprehensions. In monadic usage, new Agents are created leaving the original Agents untouched. So the old values (Agents) are still available as-is. They are so-called &lsquo;persistent&rsquo;.</p>
<p>Example of monadic usage:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L133-L151" target="_blank" title="Go to snippet source"></a><code class="language-scala">import scala.concurrent.ExecutionContext.Implicits.global
val agent1 = Agent(3)
val agent2 = Agent(5)

// uses foreach
for (value ← agent1)
  println(value)

// uses map
val agent3 = for (value ← agent1) yield value + 1

// or using map directly
val agent4 = agent1 map (_ + 1)

// uses flatMap
val agent5 = for {
  value1 ← agent1
  value2 ← agent2
} yield value1 + value2</code></pre></div>
<h2><a href="#configuration" name="configuration" class="anchor"><span class="anchor-link"></span></a>Configuration</h2>
<p>There are several configuration properties for the agents module, please refer to the <a href="general/configuration.html#config-akka-agent">reference configuration</a>.</p>
<h2><a href="#deprecated-transactional-agents" name="deprecated-transactional-agents" class="anchor"><span class="anchor-link"></span></a>Deprecated Transactional Agents</h2>
<p>Agents participating in enclosing STM transaction is a deprecated feature in 2.3.</p>
<p>If an Agent is used within an enclosing <span class="group-java"><code>Scala STM</code></span> transaction, then it will participate in that transaction. If you send to an Agent within a transaction then the dispatch to the Agent will be held until that transaction commits, and discarded if the transaction is aborted. <span class="group-scala">Here&rsquo;s an example:</span></p><div class="group-scala">
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/xmeng1/akka/tree/master/akka-docs/src/test/scala/docs/agent/AgentDocSpec.scala#L101-L122" target="_blank" title="Go to snippet source"></a><code class="language-scala">import scala.concurrent.ExecutionContext.Implicits.global
import akka.agent.Agent
import scala.concurrent.duration._
import scala.concurrent.stm._

def transfer(from: Agent[Int], to: Agent[Int], amount: Int): Boolean = {
  atomic { txn ⇒
    if (from.get &lt; amount) false
    else {
      from send (_ - amount)
      to send (_ + amount)
      true
    }
  }
}

val from = Agent(100)
val to = Agent(20)
val ok = transfer(from, to, 50)

val fromValue = from.future // -&gt; 50
val toValue = to.future // -&gt; 70</code></pre></div>
</div>
</article>

<div class="row">
<div class="small-12 large-9 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="futures.html"><i class="icon-prev"></i> <span class="link-prev">Futures</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="index-utilities.html">Utilities <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>

<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/xmeng1/akka/tree/master/akka-docs-cn/src/main/paradox/agents.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>


<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg">
<section class="copyright">
<div>Akka is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2019 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> | 
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> | 
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> | 
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> | 
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> | 
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>
</footer>

</section>
</main>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
apiKey: '543bad5ad786495d9ccd445ed34ed082',
indexName: 'akka_io',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
apiKey: '543bad5ad786495d9ccd445ed34ed082',
indexName: 'akka_io',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="assets/js/warnOldDocs.js"></script>
<script type="text/javascript" src="assets/js/scalafiddle.js"></script>


</body>
</html>
